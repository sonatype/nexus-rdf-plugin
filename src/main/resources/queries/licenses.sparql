# find all projects that have a viral license

PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX maven: <http://maven.apache.org/artifact#>
PREFIX license: <http://maven.apache.org/license#>

SELECT DISTINCT ?projectVersion ?dependencyProjectVersion ?license

WHERE {
    
    SERVICE <${nexusSPARQLEndpoint}>
    { 
        ?project rdf:type maven:Project ;
                 maven:projectVersion ?projectVersion .
        ?projectVersion maven:depends ?dependency .
        ?dependency maven:dependency ?dependencyProjectVersion .
    }
    
    SERVICE <${sparqlEndpoint}>
    { 
        ?dependencyProjectVersion maven:license ?license .
        ?license maven:permissive "no" .
    }

}
